<ProfilesView@DropDown>:
    
    BoxLayout:
        id:layout
        orientation: 'vertical'
        size_hint: 1, None  # Important! Tell DropDown the height is explicit
        padding: [5,5,5,5]
        height: scroll_view.height+add_profile_btn.height + self.padding[1] + self.padding[3]
        canvas.before:
            Color:
                rgba: 0.15, 0.15, 0.15, 1  # background colour
            Rectangle:
                size: self.size
                pos: self.pos
        ScrollView:
            id: scroll_view
            size_hint_y: None
            height:  scroll_layout.height if scroll_layout.height < dp(200) else dp(200)  # Max height of scroll

            GridLayout:
                id: scroll_layout
                height: 300
                cols: 1
                spacing: 1
                size_hint_y: None

        Button:
            id: add_profile_btn
            text: "Add Profile"
            size_hint_y: None
            height: 50
            font_size: sp(18)
            background_color: 0.8, 0.3, 0.3, 1  # Light red button

<ProfileItemView>:
    orientation: 'horizontal'
    size_hint_y: 1
    height: 50
    spacing: 5
    padding: 5
    canvas.before:
        Color:
            rgba: 0.1, 0.1, 0.1, 1  # background colour
        Rectangle:
            size: self.size
            pos: self.pos

    Button:
        id: label
        font_size: sp(16)
        color: 0.9, 0.9, 0.9, 1
        size_hint: 0.6, 1
        font_context: 'system://myapp'
<AddProfilePopupView@Popup>:
    title:'New Profile'
    size_hint: None, None
    size_hint: 0.9,0.9
    auto_dismiss: True
    BoxLayout:
        orientation: 'vertical'
        TextInput:
            id: text_input_txbx
            background_color: 0.1, 0.1, 0.1, 1  # Dark background
            foreground_color: 0.9, 0.9, 0.9, 1  # Light text color
            hint_text: 'paste invitation code here'  # Placeholder text
            font_size: sp(18)
        Button:
            id: join_profile_btn
            size_hint_y:1
            text: 'join existing profile'
            font_size: sp(18)
        Button:
            id: create_profile_btn
        
            size_hint_y:1
            text: 'create new profile'
            font_size: sp(18)
        Button:
            size_hint_y:1
            text: 'cancel'
            font_size: sp(18)
            on_release: root.dismiss()